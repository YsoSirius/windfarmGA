<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate Energy Outputs of Individuals — calculate_energy • windfarmGA</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Energy Outputs of Individuals — calculate_energy"><meta property="og:description" content="Calculate the energy output and efficiency rates of an
  individual in the current population under all given wind directions and
  speeds. If the terrain effect model is activated, the main calculations to
  model those effects will be done in this function."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">windfarmGA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/YsoSirius/windfarmGA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate Energy Outputs of Individuals</h1>
    <small class="dont-index">Source: <a href="https://github.com/YsoSirius/windfarmGA/blob/HEAD/R/calculate_energy.R" class="external-link"><code>R/calculate_energy.R</code></a></small>
    <div class="hidden name"><code>calculate_energy.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the energy output and efficiency rates of an
  individual in the current population under all given wind directions and
  speeds. If the terrain effect model is activated, the main calculations to
  model those effects will be done in this function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_energy</span><span class="op">(</span></span>
<span>  <span class="va">sel</span>,</span>
<span>  <span class="va">referenceHeight</span>,</span>
<span>  <span class="va">RotorHeight</span>,</span>
<span>  <span class="va">SurfaceRoughness</span>,</span>
<span>  <span class="va">wnkl</span>,</span>
<span>  <span class="va">distanz</span>,</span>
<span>  <span class="va">polygon1</span>,</span>
<span>  <span class="va">RotorR</span>,</span>
<span>  <span class="va">dirSpeed</span>,</span>
<span>  <span class="va">srtm_crop</span>,</span>
<span>  <span class="va">topograp</span>,</span>
<span>  <span class="va">cclRaster</span>,</span>
<span>  <span class="va">weibull</span>,</span>
<span>  plotit <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sel</dt>
<dd><p>A matrix of an individual of the current population</p></dd>


<dt>referenceHeight</dt>
<dd><p>The height at which the incoming wind speeds were
measured. Default is <code>RotorHeight</code></p></dd>


<dt>RotorHeight</dt>
<dd><p>The height of the turbine hub</p></dd>


<dt>SurfaceRoughness</dt>
<dd><p>A surface roughness length in meters. 
With the terrain effect model, a surface roughness is calculated for every 
grid cell using the elevation and land cover data. Default is <code>0.3</code></p></dd>


<dt>wnkl</dt>
<dd><p>The angle from which wake influences are considered to be 
negligible</p></dd>


<dt>distanz</dt>
<dd><p>The distance after which wake effects are considered
to be eliminated</p></dd>


<dt>polygon1</dt>
<dd><p>The considered area as Simple Feature Polygon</p></dd>


<dt>RotorR</dt>
<dd><p>The desired rotor radius in meter</p></dd>


<dt>dirSpeed</dt>
<dd><p>The wind speed and direction data.frame</p></dd>


<dt>srtm_crop</dt>
<dd><p>A list of 3 raster, with 1) the elevation, 2) an orographic
and 3) a terrain raster. Calculated in <code><a href="genetic_algorithm.html">genetic_algorithm</a></code></p></dd>


<dt>topograp</dt>
<dd><p>Boolean value, which indicates if the terrain effect model
should be enabled or not. Default is <code>FALSE</code></p></dd>


<dt>cclRaster</dt>
<dd><p>A Corine Land Cover raster, that has to be adapted
previously by hand with the surface roughness length for every land cover
type. Is only used, when the terrain effect model is activated.</p></dd>


<dt>weibull</dt>
<dd><p>A boolean value that specifies whether to take Weibull
parameters into account. If <code>TRUE</code>, the wind speed values 
of <code>vdirspe</code> are ignored. The algorithm will calculate the mean
wind speed for every wind turbine according to the Weibull parameters.
Default is <code>FALSE</code></p></dd>


<dt>plotit</dt>
<dd><p>If <code>TRUE</code>, the process will be plotted. 
Default is <code>FALSE</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns a list of an individual of the current generation with
  resulting wake effects, energy outputs, efficiency rates for every wind
  direction. The length of the list corresponds to the number of different
  wind directions.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other Wind Energy Calculation Functions: 
<code><a href="barometric_height.html">barometric_height</a>()</code>,
<code><a href="get_dist_angles.html">get_dist_angles</a>()</code>,
<code><a href="turbine_influences.html">turbine_influences</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## Create a random Polygon</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Polygon1</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4498482</span>, <span class="fl">4498482</span>, <span class="fl">4499991</span>, <span class="fl">4499991</span>, <span class="fl">4498482</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2668272</span>, <span class="fl">2669343</span>, <span class="fl">2669343</span>, <span class="fl">2668272</span>, <span class="fl">2668272</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="fl">3035</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a uniform and unidirectional wind data.frame and plot the</span></span></span>
<span class="r-in"><span><span class="co">## resulting wind rose</span></span></span>
<span class="r-in"><span><span class="va">data.in</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ws <span class="op">=</span> <span class="fl">12</span>, wd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">windrosePlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="plot_windrose.html">plot_windrose</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data.in</span>, spd <span class="op">=</span> <span class="va">data.in</span><span class="op">$</span><span class="va">ws</span>,</span></span>
<span class="r-in"><span>                dir <span class="op">=</span> <span class="va">data.in</span><span class="op">$</span><span class="va">wd</span>, dirres<span class="op">=</span><span class="fl">10</span>, spdmax<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Assign the rotor radius and a factor of the radius for grid spacing.</span></span></span>
<span class="r-in"><span><span class="va">Rotor</span><span class="op">=</span> <span class="fl">50</span>; <span class="va">fcrR</span><span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="va">resGrid</span> <span class="op">&lt;-</span> <span class="fu"><a href="grid_area.html">grid_area</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">Polygon1</span>, size <span class="op">=</span> <span class="va">Rotor</span><span class="op">*</span><span class="va">fcrR</span>, prop<span class="op">=</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>                      plotGrid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Assign the indexed data frame to new variable. Element 2 of the list</span></span></span>
<span class="r-in"><span><span class="co">## is the grid, saved as Simple Feature Polygons.</span></span></span>
<span class="r-in"><span><span class="va">resGrid1</span> <span class="op">&lt;-</span> <span class="va">resGrid</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create an initial population with the indexed Grid, 15 turbines and</span></span></span>
<span class="r-in"><span><span class="co">## 100 individuals.</span></span></span>
<span class="r-in"><span><span class="va">initpop</span> <span class="op">&lt;-</span> <span class="fu"><a href="init_population.html">init_population</a></span><span class="op">(</span>Grid <span class="op">=</span> <span class="va">resGrid1</span>, n <span class="op">=</span> <span class="fl">15</span>, nStart <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculate the expected energy output of the first individual of the</span></span></span>
<span class="r-in"><span><span class="co">## population.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Polygon1</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="st">'X'</span><span class="op">]</span>,<span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="st">'Y'</span><span class="op">]</span>, pch<span class="op">=</span><span class="fl">20</span>,cex<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">resGrid</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resCalcEn</span> <span class="op">&lt;-</span> <span class="fu">calculate_energy</span><span class="op">(</span>sel<span class="op">=</span><span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,referenceHeight<span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>                   RotorHeight<span class="op">=</span> <span class="fl">50</span>, SurfaceRoughness <span class="op">=</span> <span class="fl">0.14</span>,wnkl <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                   distanz <span class="op">=</span> <span class="fl">100000</span>, dirSpeed <span class="op">=</span> <span class="va">data.in</span>,</span></span>
<span class="r-in"><span>                   RotorR <span class="op">=</span> <span class="fl">50</span>, polygon1 <span class="op">=</span> <span class="va">Polygon1</span>, topograp <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                   weibull <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resCalcEn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">resCalcEn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Polygon1</span>, main <span class="op">=</span> <span class="va">resCalcEn</span><span class="op">[</span>,<span class="st">'Energy_Output_Red'</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">resCalcEn</span><span class="op">[</span>,<span class="st">'Bx'</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">resCalcEn</span><span class="op">[</span>,<span class="st">'By'</span><span class="op">]</span>, pch <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a variable and multidirectional wind data.frame and plot the</span></span></span>
<span class="r-in"><span><span class="co">## resulting wind rose</span></span></span>
<span class="r-in"><span><span class="va">data.in10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ws <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">1</span>,<span class="fl">25</span><span class="op">)</span>, wd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">0</span>,<span class="fl">360</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">windrosePlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="plot_windrose.html">plot_windrose</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data.in10</span>, spd <span class="op">=</span> <span class="va">data.in10</span><span class="op">$</span><span class="va">ws</span>,</span></span>
<span class="r-in"><span>                dir <span class="op">=</span> <span class="va">data.in10</span><span class="op">$</span><span class="va">wd</span>, dirres<span class="op">=</span><span class="fl">10</span>, spdmax<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculate the energy outputs for the first individual with more than one</span></span></span>
<span class="r-in"><span><span class="co">## wind direction.</span></span></span>
<span class="r-in"><span><span class="va">resCalcEn</span> <span class="op">&lt;-</span> <span class="fu">calculate_energy</span><span class="op">(</span>sel<span class="op">=</span><span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,referenceHeight<span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>                   RotorHeight<span class="op">=</span> <span class="fl">50</span>, SurfaceRoughness <span class="op">=</span> <span class="fl">0.14</span>,wnkl <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                   distanz <span class="op">=</span> <span class="fl">100000</span>, dirSpeed <span class="op">=</span> <span class="va">data.in10</span>,</span></span>
<span class="r-in"><span>                   RotorR <span class="op">=</span> <span class="fl">50</span>, polygon1 <span class="op">=</span> <span class="va">Polygon1</span>, topograp <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                   weibull <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sebastian Gatscha.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

