<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Energy Outputs of Individuals — calculate_energy • windfarmGA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Energy Outputs of Individuals — calculate_energy"><meta name="description" content="Calculate the energy output and efficiency rates of an
individual in the current population under all given wind directions and
speeds. If the terrain effect model is activated, the main calculations to
model those effects will be done in this function."><meta property="og:description" content="Calculate the energy output and efficiency rates of an
individual in the current population under all given wind directions and
speeds. If the terrain effect model is activated, the main calculations to
model those effects will be done in this function."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">windfarmGA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/YsoSirius/windfarmGA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Energy Outputs of Individuals</h1>
      <small class="dont-index">Source: <a href="https://github.com/YsoSirius/windfarmGA/blob/master/R/calculate_energy.R" class="external-link"><code>R/calculate_energy.R</code></a></small>
      <div class="d-none name"><code>calculate_energy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate the energy output and efficiency rates of an
individual in the current population under all given wind directions and
speeds. If the terrain effect model is activated, the main calculations to
model those effects will be done in this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_energy</span><span class="op">(</span></span>
<span>  <span class="va">sel</span>,</span>
<span>  <span class="va">referenceHeight</span>,</span>
<span>  <span class="va">RotorHeight</span>,</span>
<span>  <span class="va">SurfaceRoughness</span>,</span>
<span>  <span class="va">wnkl</span>,</span>
<span>  <span class="va">distanz</span>,</span>
<span>  <span class="va">polygon1</span>,</span>
<span>  <span class="va">RotorR</span>,</span>
<span>  <span class="va">dirSpeed</span>,</span>
<span>  <span class="va">srtm_crop</span>,</span>
<span>  <span class="va">topograp</span>,</span>
<span>  <span class="va">cclRaster</span>,</span>
<span>  <span class="va">weibull</span>,</span>
<span>  plotit <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sel">sel<a class="anchor" aria-label="anchor" href="#arg-sel"></a></dt>
<dd><p>A matrix of an individual of the current population</p></dd>


<dt id="arg-referenceheight">referenceHeight<a class="anchor" aria-label="anchor" href="#arg-referenceheight"></a></dt>
<dd><p>The height at which the incoming wind speeds were
measured. Default is <code>RotorHeight</code></p></dd>


<dt id="arg-rotorheight">RotorHeight<a class="anchor" aria-label="anchor" href="#arg-rotorheight"></a></dt>
<dd><p>The height of the turbine hub</p></dd>


<dt id="arg-surfaceroughness">SurfaceRoughness<a class="anchor" aria-label="anchor" href="#arg-surfaceroughness"></a></dt>
<dd><p>A surface roughness length in meters.
With the terrain effect model, a surface roughness is calculated for every
grid cell using the elevation and land cover data. Default is <code>0.3</code></p></dd>


<dt id="arg-wnkl">wnkl<a class="anchor" aria-label="anchor" href="#arg-wnkl"></a></dt>
<dd><p>The angle from which wake influences are considered to be
negligible</p></dd>


<dt id="arg-distanz">distanz<a class="anchor" aria-label="anchor" href="#arg-distanz"></a></dt>
<dd><p>The distance after which wake effects are considered
to be eliminated</p></dd>


<dt id="arg-polygon-">polygon1<a class="anchor" aria-label="anchor" href="#arg-polygon-"></a></dt>
<dd><p>The considered area as Simple Feature Polygon</p></dd>


<dt id="arg-rotorr">RotorR<a class="anchor" aria-label="anchor" href="#arg-rotorr"></a></dt>
<dd><p>The desired rotor radius in meter</p></dd>


<dt id="arg-dirspeed">dirSpeed<a class="anchor" aria-label="anchor" href="#arg-dirspeed"></a></dt>
<dd><p>The wind speed and direction data.frame</p></dd>


<dt id="arg-srtm-crop">srtm_crop<a class="anchor" aria-label="anchor" href="#arg-srtm-crop"></a></dt>
<dd><p>The first element of the <code><a href="terrain_model.html">terrain_model</a></code> resulting list</p></dd>


<dt id="arg-topograp">topograp<a class="anchor" aria-label="anchor" href="#arg-topograp"></a></dt>
<dd><p>Boolean value, which indicates if the terrain effect model
should be enabled or not. Default is <code>FALSE</code></p></dd>


<dt id="arg-cclraster">cclRaster<a class="anchor" aria-label="anchor" href="#arg-cclraster"></a></dt>
<dd><p>The second element of the <code><a href="terrain_model.html">terrain_model</a></code> resulting list</p></dd>


<dt id="arg-weibull">weibull<a class="anchor" aria-label="anchor" href="#arg-weibull"></a></dt>
<dd><p>A boolean value that specifies whether to take Weibull
parameters into account. If <code>TRUE</code>, the wind speed values
of <code>vdirspe</code> are ignored. The algorithm will calculate the mean
wind speed for every wind turbine according to the Weibull parameters.
Default is <code>FALSE</code></p></dd>


<dt id="arg-plotit">plotit<a class="anchor" aria-label="anchor" href="#arg-plotit"></a></dt>
<dd><p>If <code>TRUE</code>, the process will be plotted.
Default is <code>FALSE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list of an individual of the current generation with
resulting wake effects, energy outputs, efficiency rates for every wind
direction. The length of the list corresponds to the number of different
wind directions.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Wind Energy Calculation Functions:
<code><a href="barometric_height.html">barometric_height</a>()</code>,
<code><a href="circle_intersection.html">circle_intersection</a>()</code>,
<code><a href="get_dist_angles.html">get_dist_angles</a>()</code>,
<code><a href="turbine_influences.html">turbine_influences</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">## Create a random Polygon</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span>
<span class="r-in"><span><span class="va">Polygon1</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4498482</span>, <span class="fl">4498482</span>, <span class="fl">4499991</span>, <span class="fl">4499991</span>, <span class="fl">4498482</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2668272</span>, <span class="fl">2669343</span>, <span class="fl">2669343</span>, <span class="fl">2668272</span>, <span class="fl">2668272</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="fl">3035</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a uniform and unidirectional wind data.frame and plot the</span></span></span>
<span class="r-in"><span><span class="co">## resulting wind rose</span></span></span>
<span class="r-in"><span><span class="va">data.in</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ws <span class="op">=</span> <span class="fl">12</span>, wd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">windrosePlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="plot_windrose.html">plot_windrose</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data.in</span>, spd <span class="op">=</span> <span class="va">data.in</span><span class="op">$</span><span class="va">ws</span>,</span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">data.in</span><span class="op">$</span><span class="va">wd</span>, dirres <span class="op">=</span> <span class="fl">10</span>, spdmax <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calculate_energy-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Assign the rotor radius and a factor of the radius for grid spacing.</span></span></span>
<span class="r-in"><span><span class="va">Rotor</span> <span class="op">&lt;-</span> <span class="fl">50</span></span></span>
<span class="r-in"><span><span class="va">fcrR</span> <span class="op">&lt;-</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="va">resGrid</span> <span class="op">&lt;-</span> <span class="fu"><a href="grid_area.html">grid_area</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  shape <span class="op">=</span> <span class="va">Polygon1</span>, size <span class="op">=</span> <span class="va">Rotor</span> <span class="op">*</span> <span class="va">fcrR</span>, prop <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  plotGrid <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calculate_energy-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="calculate_energy-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## Assign the indexed data frame to new variable. Element 2 of the list</span></span></span>
<span class="r-in"><span><span class="co">## is the grid, saved as Simple Feature Polygons.</span></span></span>
<span class="r-in"><span><span class="va">resGrid1</span> <span class="op">&lt;-</span> <span class="va">resGrid</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create an initial population with the indexed Grid, 15 turbines and</span></span></span>
<span class="r-in"><span><span class="co">## 100 individuals.</span></span></span>
<span class="r-in"><span><span class="va">initpop</span> <span class="op">&lt;-</span> <span class="fu"><a href="init_population.html">init_population</a></span><span class="op">(</span>Grid <span class="op">=</span> <span class="va">resGrid1</span>, n <span class="op">=</span> <span class="fl">15</span>, nStart <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculate the expected energy output of the first individual of the</span></span></span>
<span class="r-in"><span><span class="co">## population.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Polygon1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="st">"X"</span><span class="op">]</span>, <span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>, <span class="st">"Y"</span><span class="op">]</span>, pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">resGrid</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calculate_energy-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">resCalcEn</span> <span class="op">&lt;-</span> <span class="fu">calculate_energy</span><span class="op">(</span></span></span>
<span class="r-in"><span>  sel <span class="op">=</span> <span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, referenceHeight <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  RotorHeight <span class="op">=</span> <span class="fl">50</span>, SurfaceRoughness <span class="op">=</span> <span class="fl">0.14</span>, wnkl <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  distanz <span class="op">=</span> <span class="fl">100000</span>, dirSpeed <span class="op">=</span> <span class="va">data.in</span>,</span></span>
<span class="r-in"><span>  RotorR <span class="op">=</span> <span class="fl">50</span>, polygon1 <span class="op">=</span> <span class="va">Polygon1</span>, topograp <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  weibull <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resCalcEn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">resCalcEn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Polygon1</span>, main <span class="op">=</span> <span class="va">resCalcEn</span><span class="op">[</span>, <span class="st">"Energy_Output_Red"</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">resCalcEn</span><span class="op">[</span>, <span class="st">"Bx"</span><span class="op">]</span>, y <span class="op">=</span> <span class="va">resCalcEn</span><span class="op">[</span>, <span class="st">"By"</span><span class="op">]</span>, pch <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calculate_energy-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Create a variable and multidirectional wind data.frame and plot the</span></span></span>
<span class="r-in"><span><span class="co">## resulting wind rose</span></span></span>
<span class="r-in"><span><span class="va">data.in10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ws <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">1</span>, <span class="fl">25</span><span class="op">)</span>, wd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">360</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">windrosePlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="plot_windrose.html">plot_windrose</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data.in10</span>, spd <span class="op">=</span> <span class="va">data.in10</span><span class="op">$</span><span class="va">ws</span>,</span></span>
<span class="r-in"><span>  dir <span class="op">=</span> <span class="va">data.in10</span><span class="op">$</span><span class="va">wd</span>, dirres <span class="op">=</span> <span class="fl">10</span>, spdmax <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calculate_energy-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculate the energy outputs for the first individual with more than one</span></span></span>
<span class="r-in"><span><span class="co">## wind direction.</span></span></span>
<span class="r-in"><span><span class="va">resCalcEn</span> <span class="op">&lt;-</span> <span class="fu">calculate_energy</span><span class="op">(</span></span></span>
<span class="r-in"><span>  sel <span class="op">=</span> <span class="va">initpop</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, referenceHeight <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>  RotorHeight <span class="op">=</span> <span class="fl">50</span>, SurfaceRoughness <span class="op">=</span> <span class="fl">0.14</span>, wnkl <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  distanz <span class="op">=</span> <span class="fl">100000</span>, dirSpeed <span class="op">=</span> <span class="va">data.in10</span>,</span></span>
<span class="r-in"><span>  RotorR <span class="op">=</span> <span class="fl">50</span>, polygon1 <span class="op">=</span> <span class="va">Polygon1</span>, topograp <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  weibull <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Gatscha.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

