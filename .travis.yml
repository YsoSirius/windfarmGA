language: r
cache: packages
addons:
  apt:
    packages:
      - libgdal-dev
      - libproj-dev
      - libudunits2-dev

before_install:
    - export DISPLAY=:99.0
    - sh -e /etc/init.d/xvfb start

r_packages:
  - covr
after_success:
  - Rscript -e 'library(covr);codecov()'
before_cache:
  - Rscript -e 'remotes::install_cran("pkgdown")'
deploy:
  provider: script
  script: Rscript -e 'pkgdown::deploy_site_github(verbose = TRUE)'
  skip_cleanup: true
      
warnings_are_errors: false
